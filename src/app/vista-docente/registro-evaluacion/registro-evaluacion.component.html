<div class="evaluacion-container">
  <h2>Registrar Evaluación</h2>

  <form [formGroup]="formulario" (ngSubmit)="registrarEvaluacion()">
    <div class="form-group">
      <label>Asignación:</label>
      <select formControlName="asignacion_id">
        <option value="" disabled selected>Seleccione una asignación</option>

        <optgroup *ngIf="primariaAsignaciones.length > 0" label="Primaria">
          <option *ngFor="let a of primariaAsignaciones" [value]="a.asignacion_id">
            {{ a.materia }} - {{ a.curso }} ({{ a.gestion }})
          </option>
        </optgroup>

        <optgroup *ngIf="secundariaAsignaciones.length > 0" label="Secundaria">
          <option *ngFor="let a of secundariaAsignaciones" [value]="a.asignacion_id">
            {{ a.materia }} - {{ a.curso }} ({{ a.gestion }})
          </option>
        </optgroup>
      </select>
    </div>

    <div class="form-group">
      <label>Nombre del trabajo:</label>
      <input type="text" formControlName="nombre" placeholder="Ej: Trabajo Final">
    </div>

    <div class="form-group">
      <label>Tipo:</label>
      <input type="text" formControlName="tipo" placeholder="Ej: Práctico, Examen">
    </div>

    <div class="form-group">
      <label>Fecha:</label>
      <input type="date" formControlName="fecha">
    </div>

    <div class="form-group">
      <label>Valor:</label>
      <input type="number" formControlName="valor" placeholder="Ej: 30" min="0">
    </div>

    <button type="submit" [disabled]="!formulario.valid">Registrar Evaluación</button>
  </form>

  <div *ngIf="response" class="mensaje-exito">
    <h4>✅ Evaluación registrada:</h4>
    <p><strong>{{ response.evaluacion.nombre }}</strong> en {{ response.evaluacion.materia }} ({{ response.evaluacion.periodo }})</p>
  </div>
</div>
